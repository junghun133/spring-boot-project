<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kakao bank test</title>
<link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="css/main.css" rel="stylesheet" />
<style>
    body {
		font-family: 'Varela Round', sans-serif;
	}
	.modal-login {		
		color: #636363;
		width: 350px;
		margin: 80px auto 0;
	}
	.modal-login .modal-content {
		padding: 20px;
		border-radius: 5px;
		border: none;
	}
	.modal-login .modal-header {
		border-bottom: none;   
        position: relative;
        justify-content: center;
	}
	.modal-login h4 {
		text-align: center;
		font-size: 26px;
		margin: 30px 0 -15px;
	}
	.modal-login .form-control:focus {
		border-color: #70c5c0;
	}
	.modal-login .form-control, .modal-login .btn {
		min-height: 40px;
		border-radius: 3px; 
	}
	.modal-login .close {
        position: absolute;
		top: -5px;
		right: -5px;
	}	
	.modal-login .modal-footer {
		background: #ecf0f1;
		border-color: #dee4e7;
		text-align: center;
        justify-content: center;
		margin: 0 -20px -20px;
		border-radius: 5px;
		font-size: 13px;
	}
	.modal-login .modal-footer a {
		color: #999;
	}		
	.modal-login .avatar {
		position: absolute;
		margin: 0 auto;
		left: 0;
		right: 0;
		top: -70px;
		width: 95px;
		height: 95px;
		border-radius: 50%;
		z-index: 9;
		background: #60c7c1;
		padding: 15px;
		box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);
	}
	.modal-login .avatar img {
		width: 100%;
	}
    .modal-login .btn {
        color: #fff;
        border-radius: 4px;
		background: #60c7c1;
		text-decoration: none;
		transition: all 0.4s;
        line-height: normal;
        border: none;
    }
	.modal-login .btn:hover, .modal-login .btn:focus {
		background: #45aba6;
		outline: none;
	}

</style>
</head>
<body>
 	<script>
      $(document).ready(function() {
        $('#login-btn').eq(0).bind("click", function() {
                var loginInfo = new Object();
                loginInfo.id = $('#id-input').val();
                loginInfo.password = $('#password-input').val();
                if(loginInfo.id == '' || loginInfo.password == ''){
                           alert('아이디와 비밀번호를 입력하세요');
                           return;
                }
 
               var jsonData = JSON.stringify(loginInfo);
               $.ajax({
                       method : 'POST',
                       contentType :'application/json',
                       url : 'http://127.0.0.1:8080/v1/user/login',
                       data : jsonData,

                       success : function(data) {
                              // data는 서버로부터 전송받은 결과(JSON)이므로 바로 사용한다
                              if (data.message == '성공') {
                                      alert(data.name + '님 환영합니다.');
                                      location.href = "http://localhost:8080/index.html?apiKey=" + data.apiKey;
                              } else if (data.answer == '실패') {
                                      alert('아이디와 비밀번호가 일치하지 않습니다.');
                              }
                       },
                       error : function(e) {
                              alert('서버 연결 도중 에러가 발생하였습니다. 다시 시도해 주십시오.');
                       }
               });
        });
});
     
    </script>

    <div class="s01">
	<div class="modal-dialog modal-login">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">KAKAO MAP</h4>
			</div>
			<div class="modal-body">
					<div class="form-group">
						<input id="id-input" type="text" class="form-control" name="id" placeholder="id" required="required">		
					</div>
					<div class="form-group">
						<input id="password-input" type="password" class="form-control" name="password" placeholder="Password" required="required">	
					</div>        
					<div class="form-group">
						<button id="login-btn" type="login" class="btn btn-primary btn-lg btn-block login-btn">Login</button>
					</div>
			</div>
		</div>
	</div>
	</div>
</body>
</html>